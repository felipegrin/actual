import{d2 as l,r as i,y as m,cK as h}from"./index.Aqj96zVV.js";function g(n){const s=l(),[a,o]=i.useState(s),[u,d]=i.useState([]);if(s!==a){if(o(s),s){const p=(s.schedules.filter(e=>v(e,s.statuses))||[]).map(e=>({id:"preview/"+e.id,payee:e._payee,account:e._account,amount:e._amount,date:e.next_date,schedule:e.id}));Promise.all(p.map(e=>m("rules-run",{transaction:e}))).then(e=>{const r=e.map(t=>({...t,category:s.statuses.get(t.schedule),schedule:t.schedule,subtransactions:t.subtransactions?.map(c=>({...c,id:"preview/"+c.id,schedule:t.schedule}))}));d(h(r)),n(r.map(t=>t.id))})}return u}return u}function v(n,s){const a=s.get(n.id);return!n.completed&&(a==="due"||a==="upcoming"||a==="missed")}export{g as u};
//# sourceMappingURL=usePreviewTransactions.oK1CcjjQ.chunk.js.map
